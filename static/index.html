<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <title>Next Bus Proxy for SBS Transit</title>
    <meta name="viewport" content="width=320; initial-scale=1; maximum-scale=1; user-scalable=1;"/>
    <style type="text/css">
        body {font-size: smaller;}
    </style>
</head>
<body onLoad="init();">
    <p>This is a proxy for SBS Transit's mobile iris service.</p>
    <form name="inputform" action="/stop/" method="get">
        <p>Specify bus stop number <span id="error">(5 digits)</span>:</p>
        <p id="error" style="display: none; color: red;"></p>
        <p><input type="text" name="number" maxlength="5">
        <input type="submit" value="Fetch!"></p>
    </form>
    <p style="font-size: smaller;">
        [<a href="http://antrix.net/journal/techtalk/sbsnextbus.html">About</a>] [<a href="mailto:dsarda+nextbus@gmail.com">Contact</a>]
    </p>
    <script type="text/javascript">
    function init() {
        var n_f = document.inputform.number;
        document.inputform.onsubmit = function() {
            var stop = n_f.value;
            if (stop.length != 5) {
                document.getElementById('error').style.color = 'red';
                return false;
            }
            var date = new Date();
            date.setTime(date.getTime()+(60*24*60*60*1000));
            var expires = "; expires="+date.toGMTString();
            document.cookie = "Stop="+stop+expires+"; path=/";
            return true;
        }
        var c = document.cookie.split(';');
        for (var i=0; i < c.length; i++) {
            if (c[i].indexOf('Stop') != -1) {
                n_f.value = c[i].split('=')[1];
            }
        }
        n_f.focus();
        n_f.select();
    }
    </script>
    <script>
    document.write(unescape("%3Cscript src='http://www.google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script>
    var pT = _gat._getTracker("UA-1736551-5");
    pT._trackPageview();
    </script>
</body>
</html>
